********************
WELCOME TO TIGERFIT!
********************

TIGERFIT IS A PYTHON PROJECT DEVELOPED BY DR. EMMANOUIL (MANOS) CHATZOPOULOS
OF THE DEPARTMENT OF PHYSICS AND ASTRONOMY AT LOUISIANA STATE UNIVERSITY (LSU)
TO FIT A VARIETY OF POWER-INPUT MODELS TO THE OBSERVED PSEUDOBOLOMETRIC LIGHT
CURVES OF SUPERNOVA EXPLOSIONS AND OTHER TRANSIENTS OF INTEREST. THE CURRENTLY
AVAILABLE MODELS IN TIGERFIT ARE BASED ON CHATZOPOULOS ET AL. (2012, 2013),
KASEN & BILDSTEN (2010) AND DEXTER & KASEN (2013) AND ARE SEMI-ANALYTICAL
SUPERNOVA LIGHT CURVE MODELS THAT USE THE METHODS DESCRIBED IN ARNETT (1980, 1982).
EXAMPLES OF FITS TO SOME SUPERNOVA LIGHTCURVE DATA ARE PROVIDED IN THE 'EXAMPLES'
DIRECTORY.

1. SOFTWARE REQUIREMENTS
-------------------------
THE USER NEEDS TO HAVE PYTHON 2.7 OR ABOVE INSTALLED IN A MAC OR
LINUX MACHINE. THE FOLLOWING PYTHON PACKAGES ARE UTILIZED IN TIGERFIT:
1) SCIPY, 2) NUMPY, 3) MATPLOTLIB. THESE CAN BE EASILY INSTALLED EITHER VIA
THE ANACONDA PYTHON FRAMEWORK OR ONE OF THE PACKAGE MANAGERS AVAILABLE FOR
MACOSX AND LINUX PLATFORMS (E.G. HOMEBREW, MACPORTS, FINK).

2. RUNNING TIGERFIT
-------------------------
TIGERFIT IS DESIGNED TO BE USER-FRIENDLY BUT ALSO PROVIDE ALL
OUTPUT CONTROL FLEXIBILITY NECESSARY TO USERS. THE INPUT TO TIGERFIT IS
AN ASCII FILE CORRESPONDING TO THE OBSERVED PSEUDOBOLOMETRIC LIGHT CURVE
DATA OF A SUPERNOVA OR OTHER TRANSIET.THAT FILE (E.G. sn2006gy)
NEEDS TO INCLUDE THREE COLUMNS IN THAT ORDER: REST-FRAME TIME (DAYS),
LUMINOSITY (ERG/S), ERROR IN LUMINOSITY (ERG/S).

THE REST-FRAME PSEUDOBOLOMETRIC LIGHTCURVE DATA FOR A PARTICULAR SUPERNOVA
CAN BE CONSTRUCTED USING BAND-SPECIFIC FLUX MEASUREMENTS. THERE IS PUBLICLY
AVAILABLE SOFTWARE (EG SUPERBOL: https://pypi.python.org/pypi/SuperBoL) THAT
CAN CONVERT FLUX/MAGNITUDE MEASUREMENTS INTO PSEUDOBOLOMETRIC LIGHTCRUVES USING
A VARIETY OF METHODS. AS DISCUSSED IN CHATZOPOULOS ET AL. (2013), THE USER NEEDS
TO MAKE A REASONABLE CHOICE FOR THE EXPLOSION DATE TO BE USED AS A ZERO POINT
FOR THE TIME DATA OF A SUPERNOVA LIGHTCURVE. LACK OF ACCURATE EXPLOSION DATE
CONSTRAINTS WILL RESULT IN BAD-QUALITY LIGHT CURVE FITS AND LARGE ERRORS IN THE
FITTING PARAMETERS.

TO RUN TIGERFIT SIMPLY TYPE THE FOLLOWING COMMAND IN A TERMINAL WINDOW:

> python TigerFit.py <sn_data_file> <model> <obs_errors> <printout> <plot>

WHERE THE 5 INPUT OPTIONS NEED TO BE SPECIFIED AS SUCH:

I) <sn_data_file>: PATH TO ASCII FILE CONTAINING THE OBSERVED SN LC DATA AS
DESCRIBED ABOVE (E.G. sn2006gy or data/sn2006gy).

II) <model>: CHOICE OF MODEL TO BE FIT TO THE DATA. THE CURRENTLY AVAILABLE
OPTIONS ARE: rad, rad0, mag, mag0, csm, csmrads2, csmmags2, csm2, csmrads0,
csmmags0, csm0, fbaccr, basic

WHERE

-rad, rad0
ARE THE GENERAL AND BASIC (SMALL INITIAL RADIUS, SN EJECTA
VELOCITY OF 10,000 KM/S) RADIOACTIVE DECAY MODELS.
-mag, mag0
ARE THE GENERAL AND BASIC (SMALL INITIAL RADIUS, SN EJECTA VELOCITY
OF 10,000 KM/S) MAGNETAR SPIN-DOWN MODELS
-csm, csmrads2, csmmags2, csm2, csmrads0, csmmags0, csm0
ARE COMBINATIONS OF HYBRID INPUT MODELS INCLUDING CSM INTERACTION
FOR A STEADY-STATE WIND CSM (S=2) OR A CONSTANT-DENSITY CSM SHELL (S=0).
FOR EXAMPLE 'csm' ALONE IS THE FULL CSM+RADIOACTIVE DECAY+MAGNETAR
SPIN DOWN MODEL WHILE 'csmmags0' IS THE HYBRID CSM+MAGNETAR SPIN
DOWN MODEL ASSUMING A CONSTANT-DENSITY CSM SHELL (S=0).
-fbaccr
IS THE FALLBACK ACCRETION POWER INPUT MODEL PROPOSED BY DEXTER & KASEN (2013).
-basic
PROVIDES SIMULTANEOUS FITS OF THE FOUR BASIC SN LC INPUT MODELS
USED FOR SUPERLUMINOUS SUPERNOVA LIGHT CURVES (rad0,mag0,csm0,csm2).

III) <obs_errors>: IF SET TO err THE FITS TAKE INTO ACCOUNT THE OBSERVED
ERRORS IN THE LUMINOSITY VALUES PROVIDED IN 3RD COLUMN OF THE INPUT FILE.
IF SET TO nerr THE ERRORS (WEIGHTS) FOR THE CHI-SQUARE MINIMZATION ARE ALL SET
TO 1.0.
IV) <printout>: IF SET TO show TIGERFIT WILL PRINT OUT THE TIME, LUMINOSITY
VALUES OF THE BEST-FIT MODEL FOR EXTERNAL USE. IF SET TO hide NO PRINT-OUT
OF THE MODEL WILL BE SHOWN IN THE STANDARD OUTPUT.
V) <plot>: IF SET TO plot TIGERFIT WILL PRODUCE A PLOT OF THE BEST-FIT MODEL
AGAINST THE DATA AT RUNTIME. IF SET TO <noplot> NO PLOT WILL BE PRODUCED.

FOR EXAMPLE, TO FIT ALL FOUR BASIC LIGHT CURVE MODELS TO THE LIGHTCURVE OF SN2006GY,
USING THE OBSERVED ERRORS, WITHOUT PRINTING OUT THE FULL BEST-FIT MODEL AND SHOWING
A PLOT OF THE BEST-FIT MODEL TO THE DATA THE FOLLOWING COMMAND SHOULD BE ISSUED:

> python TigerFit.py sn2006gy basic err hide plot

3. TROUBLESHOOTING
-------------------

GIVEN THE COMPLEXITY OF SUPERNOVA LIGHT CURVE SEMI-ANALYTIC MODELS, CONSIDERABLE EFFORT
HAS GONE INTO MINIMIZING NUMERICAL ERRORS AND POTENTIAL CODE CRUSHES. IT IS OFTEN SAID,
HOWEVER, THAT THE PERFECT, BUG-FREE CODE IS 1 LINE LONG. CURRENT OBSERVED ISSUES
ARE NOTED FOR THE FALLBACK ACCRETION MODEL DUE TO ITS USE OF SCIPY'S ODEINT MODULE
IN EACH TIME STEP REQUIRED TO SOLVE AN ORDINARY DIFFERENTIAL EQUATION TO DETERMINE
THE LOCATION OF THE RECOMBINATION FRONT. FOR THAT MODEL CURVE FITS CAN TAKE A SIGNIFICANTLY
LONG TIME. IN ADDITION, THE PARAMETER BOUNDARIES FOR THE BEST-FIT SEARCH ALGORITHM 
ARE CHOSEN SO THAT MOST OF REGULAR AND SUPER LUMINOUS SUPERNOVA LIGHT CURVES ARE IN 
THAT RANGE, HOWEVER FOR SOME PECULIAR AND RARE EVENTS (LIKE ASASSN-15H) 
THE VALUES OF INITIAL PARAMETER GUESSES MAY NEED TO BE ADJUSTED ACCORDINGLY. FREQUENTLY
YOU MAY ENCOUNTER THE ERROR:
raise ValueError("Residuals are not finite in the initial point."). USUALLY THAT MEANS
THAT THE CHOICE OF INITIAL GUESSES NEEDS TO BE CHANGED IN THE TIGERFIT.PY FILE.
THE USERS ARE WELCOME TO SUBMIT BUG REPORTS/ERRORS BY E-MAIL TO:
chatzopoulos@phys.lsu.edu.

4. CODE EXTENDABILITY
---------------------

TIGERFIT WAS DESIGNED IN A WAY THAT ALLOWS USERS TO CUSTOMIZE IT FOR THEIR OWN NEEDS
AND EXPAND ACCORDINGLY. FOR EXAMPLE, TO ADD ANOTHER MODEL, THE USER WILL NEED TO DEFINE
IT IN THE LCmods.py MODULE (def Lum_X(t,args*): ...) AND THEN ADD THE APPROPRIATE REFERENCES
IN TigerFit.py TO VECTORIZE IT AS WELL AS INLCUDE IT AS A NEW IF CASE
(if sys.argv[2] = 'custom'...) AND CHANGE THE RELEVANT CODE ACCORDINGLY.

5. REPOSITORY DISTRIBUTION
----------------------------------------

TIGERFIT CAN BE OBTAINED THROUGH A GIT REPOSITORY BY TYPING:
> git clone git clone https://github.com/manolis07gr/TigerFit.git
OR BY PERSONAL E-MAIL REQUEST TO DR. MANOS CHATZOPOULOS AT
chatzopoulos@phys.lsu.edu
IF YOU MAKE USE OF TIGERFIT FOR YOUR PUBLICATIONS PLEASE REFERENCE
IT APPROPRIATELY.

6. COPYRIGHT AND DISCLAIMER NOTICE
-----------------------------------

THE MODELS THAT ARE FITTED WITH TIGERFIT ARE SIMPLE SEMI-ANALYTIC MODELS BASED ON
A LOT OF ASSUMPTIONS (CENTRALLY-LOCATED POWER SOURCE, CONSTANT SN EJECTA OPACITY ETC).
AS SUCH, THE BEST-FITS FOUND ARE USEFUL IN PROVIDING ROUGH ESTIMATES OF MODEL
PARAMETERS THAT CAN BE USED AS STARTING POINTS FOR MORE ROBUST RADIATION HYDRODYNAMICS
SIMULATIONS DONE WITH MORE COMPLICATED CODES.

TIGERFIT, COPYRIGHT 2016 IS PROPERTY OF DR. EMMANOUIL CHATZOPOULOS AND LSU. 

